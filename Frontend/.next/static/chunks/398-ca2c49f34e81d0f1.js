(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398],{9779:function(t,e,a){"use strict";var s=a(5893),r=a(1163),c=a(7294),n=a(8684);e.Z=t=>e=>{let a=(0,r.useRouter)();return(0,c.useEffect)(()=>{(async()=>{let t=localStorage.getItem("token");t&&await (0,n.T2)(t)||a.replace("/")})()},[]),(0,s.jsx)(t,{...e})}},3262:function(t,e,a){"use strict";var s=a(5893),r=a(5525),c=a(7294),n=a(1163),o=a(2469);e.Z=t=>{let{isOpen:e,chat_id:a=!1}=t,[i,l]=(0,c.useState)([]),[u,h]=(0,c.useState)({}),d=(0,c.useRef)(null),p=(0,n.useRouter)(),m=t=>{l(i.map(e=>e.id===t?{...e,edit:!e.edit}:e)),u[t]||h(e=>({...e,[t]:i.find(e=>e.id===t).name})),setTimeout(()=>{d.current&&d.current.focus()},0)},v=(t,e)=>{h(a=>({...a,[t]:e.target.value}))},g=async(t,e)=>{"Enter"===e.key&&(l(i.map(e=>e.id===t?{...e,name:u[t],edit:!1}:e)),await (0,o.iY)(u[t],t,localStorage.getItem("token")),h(e=>({...e,[t]:""})))},f=async t=>{confirm("\xbfQuieres eliminar el chat de forma permanente?")?(l(i.filter(e=>e.id!==t)),await (0,o.tt)(t,localStorage.getItem("token")),a&&a==t&&p.push("/inicio")):console.log("Cancelado")},y=t=>{let e=new Date(t),a=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getFullYear()).slice(-2);return"".concat(a,"/").concat(s,"/").concat(r)},x=(t,e)=>t.length<=e?t:t.substring(0,e)+"...";return(0,c.useEffect)(()=>{(async()=>{let t=await (0,o.iG)(localStorage.getItem("token"));t.success&&l(t.data)})()},[]),(0,s.jsx)("div",{children:(0,s.jsx)(r.pJ,{as:"nav",className:"fixed z-20 top-0 left-0 w-[300px] h-full bg-[#66CDEE] transform ".concat(e?"translate-x-0":"-translate-x-full"," transition-transform duration-500 ease-in-out"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("a",{href:"/inicio",children:(0,s.jsx)("img",{src:"/assets/images/logo-v2.png",alt:"DietAsist Logo",className:"navbar-logo"})}),(0,s.jsx)("hr",{className:"border-0 w-full h-px bg-white mb-[20px]"}),(0,s.jsx)("a",{href:"/inicio",className:"custom-link",children:(0,s.jsxs)("div",{className:"rounded-md mb-3 flex flex-row justify-start items-center cursor-pointer",children:[(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:"/assets/icons/plus.png",className:"w-5 h-5"})}),(0,s.jsx)("label",{className:"newchat-text hover:translate-x-[15px] transition-transform duration-500 ease-in-out",children:"Nueva conversaci\xf3n"})]})}),(0,s.jsx)("div",{className:"mb-1 flex flex-row justify-start items-center",children:(0,s.jsx)("label",{className:"history-text",children:"Historial"})}),(0,s.jsx)("ul",{className:"p-0",children:i.map(t=>(0,s.jsx)("li",{className:"mb-0.5",children:(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[t.edit?(0,s.jsxs)("div",{className:"w-[65%] h-[22px] rounded-md py-[18px] flex flex-row justify-start items-center",children:[(0,s.jsx)("img",{src:"/assets/icons/chat.png",alt:"Chat Icon",className:"w-5 h-5 mr-[10px]"}),(0,s.jsx)("input",{ref:d,type:"text",defaultValue:t.name,className:"w-full chatsinput-text bg-[#66CDEE]",onChange:e=>v(t.id,e),onKeyDown:e=>g(t.id,e)})]}):(0,s.jsxs)("a",{href:"/chat/".concat(t.id),className:"custom-link chath-section",children:[(0,s.jsxs)("div",{className:"chath-section2",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("img",{src:"/assets/icons/chat.png",alt:"Chat Icon",className:"w-5 h-5"}),(0,s.jsx)("label",{className:"chats-text",children:"".concat(x(t.name,6))})]}),(0,s.jsx)("label",{className:"chats-text",children:"(".concat(y(t.created_at),")")})]}),(0,s.jsx)("span",{class:"name-tag",children:t.name})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("div",{className:"rounded-md py-[8px] px-[8px] cursor-pointer hover:bg-[#A5E2F5]",onClick:()=>m(t.id),children:(0,s.jsx)("img",{src:"/assets/icons/pencil.png",alt:"Pencil Icon",className:"w-5 h-5"})}),(0,s.jsx)("div",{className:"h-[20px] bg-black w-[1px]"}),(0,s.jsx)("div",{className:"rounded-md py-[8px] px-[8px] cursor-pointer hover:bg-[#A5E2F5]",onClick:()=>f(t.id),children:(0,s.jsx)("img",{src:"/assets/icons/trash.png",alt:"Trash Icon",className:"w-5 h-5"})})]})]})},t.id))})]})})})}},8684:function(t,e,a){"use strict";a.d(e,{GS:function(){return l},NB:function(){return o},T2:function(){return r},c0:function(){return u},hh:function(){return i},kS:function(){return n},z2:function(){return c}});var s=a(7066);let r=async t=>{try{return(await s.Z.get("http://localhost:8093/api/v1/auth/validar_token",{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(t){return!1}},c=async(t,e,a)=>{try{return await s.Z.post("http://localhost:8093/api/v1/auth/register",{email:t,password:e,fullname:a}),{success:!0}}catch(t){var r,c;return{success:!1,message:null===(c=t.response)||void 0===c?void 0:null===(r=c.data)||void 0===r?void 0:r.mensaje}}},n=()=>{localStorage.removeItem("token")},o=async t=>{try{return await s.Z.put("http://localhost:8093/api/v1/auth/validate?token="+t),{success:!0}}catch(t){var e,a;return{success:!1,message:null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.mensaje}}},i=async t=>{try{return await s.Z.get("http://localhost:8093/api/v1/auth/resendvalidate?email="+t),{success:!0}}catch(t){var e,a;return{success:!1,message:null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.mensaje}}},l=async t=>{try{return await s.Z.post("http://localhost:8093/api/v1/auth/requestrecover?email="+t),{success:!0}}catch(t){var e,a;return{success:!1,message:null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.mensaje}}},u=async(t,e)=>{try{return await s.Z.post("http://localhost:8093/api/v1/auth/recoverpassword",{token:t,password:e}),{success:!0}}catch(t){var a,r;return console.log(t),{success:!1,message:null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.mensaje}}}},2469:function(t,e,a){"use strict";a.d(e,{$O:function(){return u},H2:function(){return f},Jt:function(){return h},Ql:function(){return l},TC:function(){return n},_B:function(){return r},eJ:function(){return i},iG:function(){return p},iY:function(){return m},jA:function(){return o},lY:function(){return g},m8:function(){return c},mw:function(){return d},tt:function(){return v}});var s=a(7066);let r=async(t,e)=>{try{await s.Z.post("http://localhost:8093/api/v1/chat/create_message",t,{headers:{Authorization:"Bearer ".concat(e)}})}catch(t){console.log(t)}},c=async(t,e)=>{try{return{data:(await s.Z.post("http://localhost:8093/api/v1/chat/prediction/"+t,{},{headers:{Authorization:"Bearer ".concat(e)}})).data.object,success:!0}}catch(t){return console.log(t),{success:!1}}},n=async t=>{try{return(await s.Z.get("http://localhost:8093/api/v1/chat/hipertension",{headers:{Authorization:"Bearer ".concat(t)}})).data.object}catch(t){return console.log(t),t}},o=async(t,e)=>{try{return(await s.Z.get("http://localhost:8093/api/v1/chat/alergicosporcomida/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.object}catch(t){return console.log(t),t}},i=async(t,e)=>{try{return(await s.Z.get("http://localhost:8093/api/v1/chat/obesidad_apto/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.object}catch(t){return console.log(t),t}},l=async(t,e)=>{try{return(await s.Z.get("http://localhost:8093/api/v1/chat/colesterol_apto/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.object}catch(t){return console.log(t),t}},u=async(t,e)=>{try{return(await s.Z.get("http://localhost:8093/api/v1/chat/acidourico_apto/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.object}catch(t){return console.log(t),t}},h=async t=>{try{return(await s.Z.post("http://localhost:8093/api/v1/chat/register",{},{headers:{Authorization:"Bearer ".concat(t)}})).data.object}catch(t){console.log(t)}},d=async(t,e)=>{try{return{data:(await s.Z.get("http://localhost:8093/api/v1/chat/getonechat/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.object,success:!0}}catch(t){return console.log(t),{success:!1}}},p=async t=>{try{return{data:(await s.Z.get("http://localhost:8093/api/v1/chat/get_all_by_user",{headers:{Authorization:"Bearer ".concat(t)}})).data.object,success:!0}}catch(t){return{success:!1}}},m=async(t,e,a)=>{try{return{data:(await s.Z.put("http://localhost:8093/api/v1/chat/update_name/"+e+"?newname="+t,{},{headers:{Authorization:"Bearer ".concat(a)}})).data.mensaje,success:!0}}catch(t){return{success:!1}}},v=async(t,e)=>{try{return{data:(await s.Z.delete("http://localhost:8093/api/v1/chat/delete/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.mensaje,success:!0}}catch(t){return{success:!1}}},g=async(t,e)=>{try{return{data:(await s.Z.get("http://localhost:8093/api/v1/peruvianDishes/receta/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.object,success:!0}}catch(t){return{success:!1}}},f=async(t,e)=>{try{return{data:(await s.Z.get("http://localhost:8093/api/v1/chat/recomendation/"+t,{headers:{Authorization:"Bearer ".concat(e)}})).data.object,success:!0}}catch(t){return{success:!1}}}},945:function(t,e,a){"use strict";a.d(e,{Iy:function(){return o},Jg:function(){return u},M2:function(){return r},dy:function(){return n},kO:function(){return l},n:function(){return c},n$:function(){return h},sE:function(){return i}});var s=a(7066);let r=async t=>{try{return(await s.Z.get("http://localhost:8093/api/v1/user/get_all_info",{headers:{Authorization:"Bearer ".concat(t)}})).data.object}catch(t){console.log(t)}},c=async(t,e)=>{try{return await s.Z.put("http://localhost:8093/api/v1/user/basicdata",{gender:t.sexo,size:t.estatura,age:t.edad,weight:t.peso,physical_activity:t.actividadfisica,meal_frequency:t.comidasxdia},{headers:{Authorization:"Bearer ".concat(e)}}),{success:!0}}catch(t){var a,r;return{success:!1,message:null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.mensaje}}},n=async(t,e)=>{try{return await s.Z.put("http://localhost:8093/api/v1/user/medical_parameters",{hypertension:"S\xed"===t.hypertension?1:0,glycosylated_hemoglobin:t.glycosylated_hemoglobin,triglyceride:t.triglyceride,cholesterol_total:t.cholesterol_total,cholesterol_LDL:t.cholesterol_LDL,urid_acid:t.urid_acid},{headers:{Authorization:"Bearer ".concat(e)}}),{success:!0}}catch(t){var a,r;return{success:!1,message:null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.mensaje}}},o=async t=>{try{return(await s.Z.get("http://localhost:8093/api/v1/allergicingredient/get_all_for_user",{headers:{Authorization:"Bearer ".concat(t)}})).data.object}catch(t){console.log(t)}},i=async t=>{try{return(await s.Z.get("http://localhost:8093/api/v1/allergicingredient/getallfordropdown",{headers:{Authorization:"Bearer ".concat(t)}})).data.object}catch(t){console.log(t)}},l=async(t,e)=>{try{return await s.Z.post("http://localhost:8093/api/v1/allergicingredient/add",t,{headers:{Authorization:"Bearer ".concat(e)}}),{success:!0}}catch(t){var a,r,c;return{success:!1,message:null===(c=erro)||void 0===c?void 0:null===(r=c.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.mensaje}}},u=async(t,e)=>{try{let a=await s.Z.delete("http://localhost:8093/api/v1/allergicingredient/delete/"+t,{headers:{Authorization:"Bearer ".concat(e)}});return{success:!0,message:a.data.mensaje}}catch(t){var a,r;return{success:!1,message:null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.mensaje}}},h=async(t,e)=>{try{let a=new FormData;return a.append("file",t),await s.Z.post("http://localhost:8093/api/v1/user/upload",a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}}),{success:!0}}catch(t){var a,r;return{success:!1,message:(null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.mensaje)||"Error de actualizaci\xf3n de foto de perfil."}}}},3950:function(){}}]);