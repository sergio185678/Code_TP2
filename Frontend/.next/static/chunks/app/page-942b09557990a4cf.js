(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6024:function(e,s,t){Promise.resolve().then(t.bind(t,5444))},5444:function(e,s,t){"use strict";t.d(s,{default:function(){return u}});var a=t(7437),l=t(7138),n=t(2265),i=t(8472);let r=async e=>{try{return(await i.Z.get("http://localhost:8093/api/v1/auth/validar_token",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return!1}},o=async(e,s)=>{try{let t=(await i.Z.post("http://localhost:8093/api/v1/auth/login",{email:e,password:s})).data.object;return localStorage.setItem("token",t),{success:!0}}catch(e){var t,a;return{success:!1,message:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.mensaje}}};var c=t(6463),u=()=>{let[e,s]=(0,n.useState)(""),[t,i]=(0,n.useState)(""),[u,d]=(0,n.useState)(""),[m,h]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),p=(0,c.useRouter)(),x=async s=>{if(s.preventDefault(),h(!1),e&&t){g(!0);let s=await o(e.trim(),t.trim());s.success?p.push("/inicio"):(h(!0),d(s.message)),g(!1)}else{h(!0),d("Por favor, completa todos los campos.");return}};return(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");await r(e)&&p.replace("/inicio")})()},[]),(0,a.jsxs)("form",{className:"loginform",onSubmit:x,children:[(0,a.jsx)("img",{src:"/assets/images/logo.png",alt:"DietAsist Logo",className:"login-logo"}),(0,a.jsxs)("div",{className:"login-content",children:[(0,a.jsx)("label",{className:"login-t1 font-semibold",children:"Iniciar sesi\xf3n"}),(0,a.jsxs)("div",{className:"login-input1",children:[(0,a.jsx)("label",{className:"login-t2 font-normal",children:"Correo electr\xf3nico"}),(0,a.jsx)("input",{type:"text",className:"input-v1-ce",value:e,onChange:e=>s(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"login-input2",children:[(0,a.jsx)("label",{className:"login-t2 font-normal",children:"Contrase\xf1a"}),(0,a.jsx)("input",{type:"password",className:"input-v1-c",value:t,onChange:e=>i(e.target.value),required:!0})]}),m&&(0,a.jsx)("div",{className:"login-alert",children:(0,a.jsx)("label",{className:"login-t3 font-normal",children:u})}),(0,a.jsxs)("div",{className:"flex flex-row justify-center",children:[" ",(0,a.jsx)(l.default,{href:"/recuperar-contrasena",className:"custom-link",children:(0,a.jsx)("p",{className:"login-t5",children:"\xbfOlvidaste tu contrase\xf1a?"})})," "]}),(0,a.jsx)("button",{className:"btn-login",type:"submit",disabled:f,children:f?(0,a.jsx)("div",{className:"spinner-border text-[#fff]",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,a.jsx)("a",{className:"login-t2 font-semibold text-[#fff] no-underline",children:"Entrar"})}),(0,a.jsxs)("div",{className:"flex flex-row justify-center",children:[" ",(0,a.jsx)("label",{className:"login-t4",children:" \xbfNo tienes cuenta?\xa0"})," ",(0,a.jsx)(l.default,{href:"/registrarse",className:"custom-link",children:(0,a.jsx)("p",{className:"login-t4 text-[#66CDEE] cursor-pointer hover:underline underline-offset-2",children:"Reg\xedstrate"})})," "]})]})]})}}},function(e){e.O(0,[806,971,23,744],function(){return e(e.s=6024)}),_N_E=e.O()}]);