(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{897:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verificar-cuenta",function(){return a(5415)}])},7931:function(e,t,a){"use strict";var s=a(5893),n=a(1163),r=a(7294),c=a(8684);t.Z=e=>t=>{let a=(0,n.useRouter)();return(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");e&&await (0,c.T2)(e)&&a.replace("/inicio")})()},[]),(0,s.jsx)(e,{...t})}},5415:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(5893),n=a(1163),r=a(7294),c=a(8684),i=()=>{let e=(0,n.useRouter)(),[t,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a(localStorage.getItem("email")||"")},[]);let d=(e,t)=>{if(e.target.value.length===e.target.maxLength){let e=document.getElementById("code-input-".concat(t+1));e&&e.focus()}},v=e=>{e.forEach(e=>{e.value=""})},h=async t=>{t.preventDefault(),o(!0);let a=document.querySelectorAll(".input-v3"),s=Array.from(a).map(e=>e.value);if(s.includes(""))alert("Por favor, ingresa todos los d\xedgitos del c\xf3digo.");else{let t=await (0,c.NB)(s.join(""));t.success?(alert("Tu cuenta ha sido verificada con \xe9xito."),e.push("/")):(alert(t.message),v(a))}o(!1)},m=async()=>{u(!0);let e=await (0,c.hh)(localStorage.getItem("email"));e.success?alert("Se ha reenviado el c\xf3digo de verificaci\xf3n a tu correo electr\xf3nico."):alert(e.message),u(!1)};return(0,s.jsxs)("form",{className:"vaccountform",children:[(0,s.jsx)("img",{src:"/assets/images/logo.png",alt:"DietAsist Logo",className:"login-logo"}),(0,s.jsxs)("div",{className:"passr-content items-center",children:[(0,s.jsx)("label",{className:"passr-t1",children:"Verifica tu cuenta"}),(0,s.jsxs)("label",{className:"passr-t2 mt-[5px] text-center",children:["Por favor, ingresa el c\xf3digo de 4 d\xedgitos ",(0,s.jsx)("br",{})," enviado a ",t]}),(0,s.jsx)("div",{className:"code-input flex flex-row mt-[30px] justify-between",children:[,,,,].fill("").map((e,t)=>(0,s.jsx)("input",{id:"code-input-".concat(t),className:"input-v3",maxLength:"1",onInput:e=>d(e,t)},t))}),l?(0,s.jsx)("div",{className:"spinner-border text-[#66CDEE] mt-[8px] mb-[8px]",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,s.jsx)("p",{className:"passr-t2 text-[#66CDEE] mt-[50px] cursor-pointer hover:underline underline-offset-2",onClick:m,children:"Reenviar c\xf3digo"}),(0,s.jsx)("button",{className:"btn-verify mt-[15px]",onClick:h,disabled:i,children:i?(0,s.jsx)("div",{className:"spinner-border text-[#fff]",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,s.jsx)("a",{className:"passr-t3 no-underline",children:"CONFIRMAR"})})]})]})};a(3950),a(1497),a(5200);var o=(0,a(7931).Z)(function(){return(0,s.jsx)("div",{className:"home-bg",children:(0,s.jsx)(i,{})})})},8684:function(e,t,a){"use strict";a.d(t,{GS:function(){return l},NB:function(){return i},T2:function(){return n},c0:function(){return u},hh:function(){return o},kS:function(){return c},z2:function(){return r}});var s=a(7066);let n=async e=>{try{return(await s.Z.get("http://localhost:8093/api/v1/auth/validar_token",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return!1}},r=async(e,t,a)=>{try{return await s.Z.post("http://localhost:8093/api/v1/auth/register",{email:e,password:t,fullname:a}),{success:!0}}catch(e){var n,r;return{success:!1,message:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.mensaje}}},c=()=>{localStorage.removeItem("token")},i=async e=>{try{return await s.Z.put("http://localhost:8093/api/v1/auth/validate?token="+e),{success:!0}}catch(e){var t,a;return{success:!1,message:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.mensaje}}},o=async e=>{try{return await s.Z.get("http://localhost:8093/api/v1/auth/resendvalidate?email="+e),{success:!0}}catch(e){var t,a;return{success:!1,message:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.mensaje}}},l=async e=>{try{return await s.Z.post("http://localhost:8093/api/v1/auth/requestrecover?email="+e),{success:!0}}catch(e){var t,a;return{success:!1,message:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.mensaje}}},u=async(e,t)=>{try{return await s.Z.post("http://localhost:8093/api/v1/auth/recoverpassword",{token:e,password:t}),{success:!0}}catch(e){var a,n;return console.log(e),{success:!1,message:null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.mensaje}}}},3950:function(){},1497:function(){}},function(e){e.O(0,[729,653,888,774,179],function(){return e(e.s=897)}),_N_E=e.O()}]);