(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{2748:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/restablecer-contrasena/[recovertoken]",function(){return a(1579)}])},7931:function(e,s,a){"use strict";var t=a(5893),r=a(1163),n=a(7294),c=a(8684);s.Z=e=>s=>{let a=(0,r.useRouter)();return(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");e&&await (0,c.T2)(e)&&a.replace("/inicio")})()},[]),(0,t.jsx)(e,{...s})}},1579:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var t=a(5893),r=a(1163),n=a(7294),c=a(8684),o=e=>{let{recovertoken:s}=e,a=(0,r.useRouter)(),[o,u]=(0,n.useState)(!1),[l,i]=(0,n.useState)(""),[d,v]=(0,n.useState)(!1),[p,h]=(0,n.useState)(""),[m,f]=(0,n.useState)(""),x=async e=>{e.preventDefault(),u(!1);let t=/\s/;if(""===p||""===m)alert("Por favor, ingresa tu nueva contrase\xf1a dos veces.");else if(t.test(p)||t.test(m))u(!0),i("La contrase\xf1a no puede contener espacios en blanco.");else if(p!==m)u(!0),i("Las contrase\xf1as no coinciden.");else{v(!0);let e=await (0,c.c0)(s,p);e.success?(u(!1),alert("Tu contrase\xf1a ha sido cambiada exitosamente. Ahora puedes acceder a tu cuenta utilizando tu nueva contrase\xf1a."),a.push("/")):alert(e.message),v(!1)}};return(0,t.jsxs)("form",{className:"vaccountform",children:[(0,t.jsx)("img",{src:"/assets/images/logo.png",alt:"DietAsist Logo",className:"login-logo"}),(0,t.jsxs)("div",{className:"flex flex-col w-[80%]",children:[(0,t.jsx)("label",{className:"passr-t1",children:"Restablece tu contrase\xf1a"}),(0,t.jsxs)("div",{className:"flex flex-col mt-[20px]",children:[(0,t.jsx)("label",{className:"passr-t2",children:"Nueva contrase\xf1a"}),(0,t.jsx)("input",{id:"pass",type:"password",className:"input-v1-c",onChange:e=>h(e.target.value),required:!0}),(0,t.jsx)("label",{className:"passr-t2 mt-[10px]",children:"Confirmar nueva contrase\xf1a"}),(0,t.jsx)("input",{id:"pass2",type:"password",className:"input-v1-c",onChange:e=>f(e.target.value),required:!0})]}),o&&(0,t.jsx)("div",{className:"mt-2 px-2 py-2 bg-red-100 border border-red-400 text-red-700 rounded flex flex-row justify-center items-center",children:(0,t.jsx)("label",{className:"passr-t4",children:l})}),(0,t.jsx)("button",{className:"btn-passrcy mt-[50px]",onClick:x,disabled:d,children:d?(0,t.jsx)("div",{className:"spinner-border text-[#fff]",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,t.jsx)("a",{className:"passr-t3",children:"RESTABLECER CONTRASE\xd1A"})})]})]})};a(3950),a(1497),a(5200);var u=(0,a(7931).Z)(function(){let{recovertoken:e}=(0,r.useRouter)().query;return(0,t.jsx)("div",{className:"home-bg",children:(0,t.jsx)(o,{recovertoken:e})})})},8684:function(e,s,a){"use strict";a.d(s,{GS:function(){return l},NB:function(){return o},T2:function(){return r},c0:function(){return i},hh:function(){return u},kS:function(){return c},z2:function(){return n}});var t=a(7066);let r=async e=>{try{return(await t.Z.get("http://localhost:8093/api/v1/auth/validar_token",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return!1}},n=async(e,s,a)=>{try{return await t.Z.post("http://localhost:8093/api/v1/auth/register",{email:e,password:s,fullname:a}),{success:!0}}catch(e){var r,n;return{success:!1,message:null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.mensaje}}},c=()=>{localStorage.removeItem("token")},o=async e=>{try{return await t.Z.put("http://localhost:8093/api/v1/auth/validate?token="+e),{success:!0}}catch(e){var s,a;return{success:!1,message:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.mensaje}}},u=async e=>{try{return await t.Z.get("http://localhost:8093/api/v1/auth/resendvalidate?email="+e),{success:!0}}catch(e){var s,a;return{success:!1,message:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.mensaje}}},l=async e=>{try{return await t.Z.post("http://localhost:8093/api/v1/auth/requestrecover?email="+e),{success:!0}}catch(e){var s,a;return{success:!1,message:null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.mensaje}}},i=async(e,s)=>{try{return await t.Z.post("http://localhost:8093/api/v1/auth/recoverpassword",{token:e,password:s}),{success:!0}}catch(e){var a,r;return console.log(e),{success:!1,message:null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.mensaje}}}},3950:function(){},1497:function(){}},function(e){e.O(0,[729,653,888,774,179],function(){return e(e.s=2748)}),_N_E=e.O()}]);